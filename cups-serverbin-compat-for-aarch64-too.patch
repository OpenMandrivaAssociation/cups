--- cups-2.2rc1/scheduler/conf.c.omv~	2016-08-14 20:53:49.850960635 +0200
+++ cups-2.2rc1/scheduler/conf.c	2016-08-14 20:54:18.582834858 +0200
@@ -619,7 +619,7 @@ cupsdReadConfiguration(void)
   cupsdClearString(&ServerName);
   cupsdClearString(&ServerAdmin);
   cupsdSetString(&ServerBin, CUPS_SERVERBIN);
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
   cupsdSetString(&ServerBin_compat, "/usr/lib64/cups");
 #endif /* __x86_64__ */
   cupsdSetString(&RequestRoot, CUPS_REQUESTS);
@@ -1648,7 +1648,7 @@ cupsdReadConfiguration(void)
     * Read the MIME type and conversion database...
     */
 
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
     snprintf(temp, sizeof(temp), "%s/filter:%s/filter", ServerBin,
 	     ServerBin_compat);
 #else
--- cups-2.2rc1/scheduler/conf.h.omv~	2016-08-14 20:54:20.900824718 +0200
+++ cups-2.2rc1/scheduler/conf.h	2016-08-14 20:57:13.280073251 +0200
@@ -106,7 +106,7 @@ VAR char		*ConfigurationFile	VALUE(NULL)
 					/* Root directory for scheduler */
 			*ServerBin		VALUE(NULL),
 					/* Root directory for binaries */
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 			*ServerBin_compat	VALUE(NULL),
 					/* Compat directory for binaries */
 #endif /* __x86_64__ */
--- cups-2.2rc1/scheduler/env.c.omv~	2016-08-14 20:57:19.268047230 +0200
+++ cups-2.2rc1/scheduler/env.c	2016-08-14 20:57:32.551989520 +0200
@@ -212,7 +212,7 @@ cupsdUpdateEnv(void)
   set_if_undefined("LD_PRELOAD", NULL);
   set_if_undefined("NLSPATH", NULL);
   if (find_env("PATH") < 0)
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
     cupsdSetEnvf("PATH", "%s/filter:%s/filter:" CUPS_BINDIR ":" CUPS_SBINDIR
                          ":/bin:/usr/bin", ServerBin, ServerBin_compat);
 #else /* ! defined(__x86_64__) */
--- cups-2.2rc1/scheduler/ipp.c.omv~	2016-08-14 20:57:41.293951555 +0200
+++ cups-2.2rc1/scheduler/ipp.c	2016-08-14 20:58:14.017809527 +0200
@@ -2650,7 +2650,7 @@ add_printer(cupsd_client_t  *con,	/* I -
         * Could not find device in list!
 	*/
 
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 	snprintf(srcfile, sizeof(srcfile), "%s/backend/%s", ServerBin_compat,
 		 scheme);
 	if (access(srcfile, X_OK))
@@ -2662,7 +2662,7 @@ add_printer(cupsd_client_t  *con,	/* I -
 	  cupsdDeletePrinter(printer, 0);
 
 	return;
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 	}
 #endif /* __x86_64__ */
       }
--- cups-2.2rc1/scheduler/job.c.omv~	2016-08-14 20:58:17.561794154 +0200
+++ cups-2.2rc1/scheduler/job.c	2016-08-14 20:58:52.495642693 +0200
@@ -1227,7 +1227,7 @@ cupsdContinueJob(cupsd_job_t *job)	/* I
       {
 	snprintf(command, sizeof(command), "%s/filter/%s", ServerBin,
 		 filter->filter);
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 	if (access(command, F_OK))
 	  {
 	    snprintf(command, sizeof(command), "%s/filter/%s",
@@ -1405,7 +1405,7 @@ cupsdContinueJob(cupsd_job_t *job)	/* I
     {
       cupsdClosePipe(job->back_pipes);
       cupsdClosePipe(job->side_pipes);
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
       if (access(command, F_OK))
 	{
 	  snprintf(command, sizeof(command), "%s/backend/%s", ServerBin_compat,
--- cups-2.2rc1/scheduler/printers.c.omv~	2016-08-14 20:58:59.203613626 +0200
+++ cups-2.2rc1/scheduler/printers.c	2016-08-14 20:59:38.164444897 +0200
@@ -973,7 +973,7 @@ cupsdLoadAllPrinters(void)
 	    * Backend does not exist, stop printer...
 	    */
 
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 	    snprintf(line, sizeof(line), "%s/backend/%s", ServerBin_compat,
 		     p->device_uri);
 	    if (access(line, 0))
@@ -983,7 +983,7 @@ cupsdLoadAllPrinters(void)
 	    p->state = IPP_PRINTER_STOPPED;
 	    snprintf(p->state_message, sizeof(p->state_message),
 	             "Backend %s does not exist!", line);
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
 	      }
 #endif /* __x86_64__ */
 	  }
@@ -3543,7 +3543,7 @@ add_printer_filter(
     else
       snprintf(filename, sizeof(filename), "%s/filter/%s", ServerBin, program);
 
-#ifdef __x86_64__
+#if defined(__x86_64__) || defined(__aarch64__)
     if (_cupsFileCheck(filename, _CUPS_FILE_CHECK_PROGRAM, !RunUser,
                        cupsdLogFCMessage, p) == _CUPS_FILE_CHECK_MISSING) {
       snprintf(filename, sizeof(filename), "%s/filter/%s", ServerBin_compat,
